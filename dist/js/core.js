angular.module("newsApp",["ui.router","routes","services","filters","directives"]),function(){var e=angular.module("directives",[]);e.directive("xheader",["$state",function(e){return{templateUrl:"directive/xheader.html",link:function(t,n,o){t.baseUrl="https://bird.ioliu.cn/v1?url=",t.columnArr=["#!/home/index/1","#!/home/weitoutiao/yule/2","#!/home/weitoutiao/junshi/3","#!/home/weitoutiao/qiche/4","#!/home/weitoutiao/caijing/5","#!/home/weitoutiao/xiaohua/6","#!/home/weitoutiao/tiyu/7","#!/home/weitoutiao/keji/8"],t.tableNum=e.params.tableNum,t.route=t.columnArr[t.tableNum-1],t.title=o.channel}}}]),e.directive("xsearch",[function(){return{templateUrl:"directive/xsearch.html",link:function(e,t,n){e.isShowSearch=!1,e.keyword="",e.changeShowSearch=function(){e.isShowSearch=!0},e.clearWord=function(){e.keyword=""}}}}]),e.directive("xbanner",["$http","$timeout",function(e,t){return{templateUrl:"directive/xbanner.html",link:function(n,o,i){n.banner=[],n.tablenum1=1,n.page1=2,n.pageSize1=4,n.isShow=0,n.showImg=function(){n.isShow++,t(function(){e({method:"GET",url:n.baseUrl+"http://api.dagoogle.cn/news/get-news?tableNum="+n.tablenum1+"&pagesize="+n.pageSize1+"&page="+n.page1,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},transformRequest:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}}).then(function(e){n.banner=e.data.data,n.isShow--,0!=n.isShow&&(n.isShow=0)},function(e){console.log(e)})},1e3)},n.showImg();new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0,observer:!0,observeParents:!0})}}}]),e.directive("xlist",["$http",function(e){return{templateUrl:"directive/xlist.html",link:function(t,n,o){t.news=[],t.channel=o.channel,t.tableNum1=1,t.page1=1,t.pagesize1=10,t.noMore=!1,t.showMore=!0,t.changeShow=function(){t.showNews()},t.showNews=function(){t.isShow++,t.showMore=!1,t.page1++,e({method:"GET",url:t.baseUrl+"http://api.dagoogle.cn/news/get-news?tableNum="+t.tableNum1+"&pagesize="+t.pagesize1+"&page="+t.page1,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},transformRequest:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}}).then(function(e){t.news=t.news.concat(e.data.data),t.isShow--,t.showMore=!0,t.news.length>=50&&(t.noMore=!0,t.isShow=0,t.showMore=!1)},function(e){console.log(e)})},t.showNews()}}}]),e.directive("xfooter",["$location",function(e){return{templateUrl:"directive/xfooter.html",link:function(t,n,o){var i=e.path().split("/");t.route=i[2],t.currentCol=function(){"index"==t.route?(t.tab=0,t.changeTab=function(e){t.tab=e}):"weitoutiao"==t.route?(t.tab=2,t.changeTab=function(e){t.tab=e}):"mine"==t.route&&(t.tab=3,t.changeTab=function(e){t.tab=e})},t.currentCol()}}}]),e.directive("xarticle",["$state","$http",function(e,t){return{templateUrl:"directive/xarticle.html",link:function(n,o,i){n.news_id=e.params.id,n.channel=i.channel,n.tableNum2=e.params.tableNum,n.news={},n.showNewsImg=!1,n.mainContent="",n.commentArr=[],n.isShou=!1,n.dongtai=getCookie("dongtai")?JSON.parse(getCookie("dongtai")):[],n.hadshou=function(){var e=Date.parse(new Date);if(n.isShou=!n.isShou,getCookie("dongtai")){t={title:n.news.title,imgurl:n.news.top_image,time:e};n.dongtai.push(t),setCookie("dongtai",JSON.stringify(n.dongtai))}else{var t={title:n.news.title,imgurl:n.news.top_image,time:e};n.dongtai.push(t),setCookie("dongtai",JSON.stringify(n.dongtai))}},n.click=function(e){n.imgUrl=e.target.src,n.showNewsImg=!0},n.changeGallery=function(){n.showNewsImg=!1},n.sendComment=function(){var e=Date.parse(new Date),t={};if(t.content=n.mainContent,t.time=e,n.commentArr.push(t),getCookie("dongtai")){o={title:n.news.title,content:n.mainContent,time:e};n.dongtai.push(o),setCookie("dongtai",JSON.stringify(n.dongtai))}else{console.log(222);var o={title:n.news.title,content:n.mainContent,time:e};n.dongtai.push(o),setCookie("dongtai",JSON.stringify(n.dongtai))}n.mainContent=""},n.detail=function(){t({method:"GET",url:n.baseUrl+"http://api.dagoogle.cn/news/single-news?tableNum="+n.tableNum2+"&news_id="+n.news_id,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},transformRequest:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}}).then(function(e){n.news=e.data.data},function(e){console.log(e)})},n.detail()}}}]),e.directive("xcolumn",["$state",function(e){return{templateUrl:"directive/xcolumn.html",link:function(t,n,o){t.tableNum=e.params.tableNum,t.changeColumn=function(e){t.tableNum=e};new Swiper(".swiper-container",{pagination:".swiper-pagination",slidesPerView:8,paginationClickable:!0,spaceBetween:10,freeMode:!0})}}}]),e.directive("xloading",[function(){return{templateUrl:"directive/xloading.html"}}]),e.directive("xcolumnnews",["$http","$state",function(e,t){return{templateUrl:"directive/xcolumnnews.html",link:function(n,o,i){n.baseUrl="https://bird.ioliu.cn/v1?url=",n.channel=i.channel,n.news=[],n.tableNum=t.params.tableNum,n.page=1,n.pagesize=10,n.isShow=!0,n.noMore=!1,n.showMore=!0,n.changeShow=function(){n.isShow=!0,n.showMore=!1,n.showNews()},n.showNews=function(){e({method:"GET",url:n.baseUrl+"http://api.dagoogle.cn/news/get-news?tableNum="+n.tableNum+"&pagesize="+n.pagesize+"&page="+n.page,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},params:{tableNum:n.tableNum,page:n.page++,pagesize:n.pagesize},transformRequest:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}}).then(function(e){n.news=n.news.concat(e.data.data),n.isShow=!1,n.showMore=!0,n.news.length>=50&&(n.noMore=!0,n.isShow=!1,n.showMore=!1)},function(e){console.log(e)})},n.showNews()}}}]),e.directive("xmine",["$state",function(e){return{templateUrl:"directive/xmine.html",link:function(e,t,n){e.num=1,e.changeColumn=function(t){e.num=t}}}}]),e.directive("xdongtai",["$state",function(e){return{templateUrl:"directive/xdongtai.html",link:function(e,t,n){e.dongtai=null,e.showNo=!1,e.tag=["收藏文章","发表评论"],e.render=function(){e.dongtai=getCookie("dongtai")?JSON.parse(getCookie("dongtai")):[],console.log(e.dongtai),0==e.dongtai.length?e.showNo=!0:e.showNo=!1},e.render()}}}]),e.directive("xshoucang",["$state",function(e){return{templateUrl:"directive/xshoucang.html",link:function(e,t,n){}}}]),e.directive("xxiaoxi",["$state",function(e){return{templateUrl:"directive/xxiaoxi.html",link:function(e,t,n){}}}])}(),function(){var e=angular.module("filters",[]);e.filter("html",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),e.filter("toNum",[function(){return function(e){return 1*(e+"000")}}]),e.filter("shortTitle",[function(){return function(e){return e.length>15?e.slice(0,15)+"...":e}}])}(),angular.module("services",[]).service("tool",[function(){return{}}]),angular.module("routes",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("home",{url:"/home",templateUrl:"template/home.html"}).state("home.video",{url:"/video",templateUrl:"template/video.html"}).state("home.index",{url:"/index/:tableNum",templateUrl:"template/index.html"}).state("home.weitoutiao",{url:"/weitoutiao",templateUrl:"template/weitoutiao.html"}).state("home.mine",{url:"/mine",templateUrl:"template/mine.html"}).state("home.weitoutiao.toutiao",{url:"/toutiao/:tableNum",templateUrl:"template/toutiao.html"}).state("home.weitoutiao.yule",{url:"/yule/:tableNum",templateUrl:"template/yule.html"}).state("home.weitoutiao.junshi",{url:"/junshi/:tableNum",templateUrl:"template/junshi.html"}).state("home.weitoutiao.qiche",{url:"/qiche/:tableNum",templateUrl:"template/qiche.html"}).state("home.weitoutiao.caijing",{url:"/caijing/:tableNum",templateUrl:"template/caijing.html"}).state("home.weitoutiao.xiaohua",{url:"/xiaohua/:tableNum",templateUrl:"template/xiaohua.html"}).state("home.weitoutiao.tiyu",{url:"/tiyu/:tableNum",templateUrl:"template/tiyu.html"}).state("home.weitoutiao.keji",{url:"/keji/:tableNum",templateUrl:"template/keji.html"}).state("home.mine.dongtai",{url:"/dongtai",templateUrl:"template/dongtai.html"}).state("home.mine.shoucang",{url:"/shoucang",templateUrl:"template/shoucang.html"}).state("home.mine.xiaoxi",{url:"/xiaoxi",templateUrl:"template/xiaoxi.html"}).state("detail",{url:"/detail/:id/:tableNum",templateUrl:"template/detail.html"}),t.when("","/home/index/1")}]),angular.bootstrap(document.body,["newsApp"]);